<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Emotion Detection App</title>
  <link rel="stylesheet" href="/static/styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="app-container">
    <div class="header-bar">
      <div class="project-name">Assistive Homecare for Mild Dementia Patients</div>
      <div class="theme-toggle">
        <button id="themeToggle">🌙 Dark Mode</button>
      </div>
    </div>
    
    <!-- Speech Input Section -->
    <div class="card section-card">
      <h2>🎤 Speech Input</h2>
      <div class="speech-controls">
        <button class="btn gradient-btn" id="listenBtn">Start Recording</button>
        <div class="file-upload-area">
          <label for="audioFileUpload" class="file-upload-btn">Upload Audio File</label>
          <input type="file" id="audioFileUpload" accept="audio/*" style="display: none;">
        </div>
      </div>
      <div id="recordingStatus" class="recording-status"></div>
    </div>
    
    <!-- Transcription Section -->
    <div class="card section-card">
      <h2>📝 Transcription</h2>
      <div class="transcription-box" id="transcriptionBox">No transcription yet</div>
    </div>
    
    <!-- Emotion Section -->
    <div class="card emotion-card" id="emotionSection" style="display: none;">
      <h2>😊 Detected Emotion</h2>
      <div class="emotion-detection">
        <div class="emotion-text">
          <h3>Detected Emotion: <span class="emotion-state" id="emotionState"></span></h3>
          <p id="emotionDetectedText"></p>
        </div>
      </div>
    </div>
    
    <!-- Intervention Section -->
    <div class="card section-card" id="interventionCard" style="display: none;">
      <h2>🚨 Intervention</h2>
      <div id="interventionContent"></div>
      <div id="feedbackArea" style="margin-top: 20px; text-align: center;"></div>
    </div>
  </div>
  
  <!-- Patient Info Modal (Displayed by default) -->
  <div id="patientInfoModal" class="modal" style="display: flex;">
    <div class="modal-content">
      <h3>Patient Information</h3>
      <form id="patientInfoForm">
        <div class="form-group">
          <label for="patientName">Patient Name:</label>
          <input type="text" id="patientName" required>
        </div>
        <div class="form-group">
          <label for="caregiverPhone">Caregiver Phone Number:</label>
          <input type="tel" id="caregiverPhone" placeholder="+1234567890" required>
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" id="rememberInfo" checked>
            Remember this information
          </label>
        </div>
        <div class="form-actions">
          <button type="submit" class="btn gradient-btn">Save</button>
          <button type="button" id="skipButton" class="btn">Skip for Now</button>
        </div>
      </form>
    </div>
  </div>
  
  <script src="/static/script.js"></script>
</body>
</html>
